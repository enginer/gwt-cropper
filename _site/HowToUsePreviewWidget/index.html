<!doctype html>
<html class="no-js" lang="en" itemscope itemtype="http://schema.org/SoftwareApplication">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Wiki GWT-Cropper</title>
        <meta name="description" content="How to use the Preview widget with GWT-Cropper">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta itemprop="applicationCategory" content="Plugin" />
        <meta itemprop="author" content="w32blaster" />
        <meta itemprop="creator" content="w32blaster" />
        <meta itemprop="url" content="http://gwt-cropper.co.uk/"/>

        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" href="/stylesheets/normalize.css">
        <link rel="stylesheet" href="/stylesheets/main.css">

        <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        
        <link rel="stylesheet" href="/stylesheets/default.css">
        
        <script src="/javascripts/highlight.pack.js"></script>
        <script src="/javascripts/vendor/modernizr-2.8.3.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <div class="container">
                <div class="site-header clearfix" role="banner">
                    <ul class="site-nav inline-block-list">
                        <li>
                            <a href="/">Main</a>
                        </li>
                        <li>
                            <a href="https://github.com/w32blaster/gwt-cropper">GitHub</a>
                        </li>
                    </ul>
                </div>

                <div class="site-promo"></div>
        </div>

        <div class="site-section">
            <div class="container">
                <h3>Table of content</h3>




<ul>
    <li><a href="/Usage">Usage</a></li>
    <li><a href="/TipsAndTricks">Tips and tricks</a></li>
    <li><a href="/Styling">Styling</a></li>
    <li><a href="/HowToUsePreviewWidget">How to use Preview widget</a></li>
</ul>


<h1>Introduction</h1>

<p>In the version 0.5.0 the <em>GWT Cropper</em> got a new class called <em>GWTCropperPreview.java</em>, that allows to show in real time only a selected area in separate panel (i.e. "preview"). It is pretty easy to use it. Here are two steps to set it up.</p>

<h2>Demo</h2>

<p>Take a look at this widget <a href="http://wiki.gwt-cropper.googlecode.com/hg/demo/Application2.html">in action</a></p>

<h2>1. Create Preview widget instance</h2>

<pre><code>        GWTCropperPreview preview = new GWTCropperPreview(Dimension.WIDTH, 100);
</code></pre>

<p>During initializing you must specify two arguments: a side of the widget that you wish to leave unchanged and its lenght in pixels. In case if you specified the free-shaped selection, the preview will have one side with constant length (width 100px in the example above) and adjust another one to the current shape of a selection.</p>

<p>Let's take an example to make it more understandable. Let's say you have a cropper with free-shaped selection and next to it you placed a preview widget. It is wise to make a constant width for this widget to save the layout of your page. When an user changes the selection, the preview widget will automatically adjust its height to save the correct proportion</p>

<p><img src="/images/wiki/preview-fixed-width.jpg" alt="GWT-Cropper fixed width" /></p>

<p><em>Pic.1 If you specify the WIDTH to preview widget, then it will adjust its height according the selection proportion</em></p>

<p>On the contrary, if you placed a preview in a vertical panel it is wise to make a constant height to save the page layout. The widget will work in the same way, but adjusting its width:</p>

<p><img src="/images/wiki/preview-fixed-height.jpg" alt="GWT-Cropper fixed height" /></p>

<p><em>Pic.2 If you specify the HEIGHT to preview widget, then it will adjust its width according the selection proportion</em></p>

<p><em>Note</em>, if you specified aspect ratio 1, that means, that the widget has a sqare selection, then you can use any value for the first argument, because width is always equals height in a square. In this case these two lines will have the same effect:</p>

<pre><code>        // in case of square selection these lines will have the same effect
        GWTCropperPreview previewW = new GWTCropperPreview(Dimension.WIDTH, 100);
        GWTCropperPreview previewH = new GWTCropperPreview(Dimension.HEIGHT, 100);
</code></pre>

<h2>2. Register the preview widget in the cropper instance</h2>

<p>Next step, just register this instance using the method <a href="http://wiki.gwt-cropper.googlecode.com/hg/apidocs/com/google/code/gwt/crop/client/GWTCropper.html#registerPreviewWidget%28com.google.code.gwt.crop.client.GWTCropperPreview%29">registerPreviewWidget(GWTCropperPreview previewWidget)</a>. The full example may look like this:</p>

<pre><code>        GWTCropper cropper = new GWTCropper("image.jpg");
        GWTCropperPreview cropperPreview = new GWTCropperPreview(Dimension.WIDTH, 100);
        cropper.registerPreviewWidget(cropperPreview);
</code></pre>

<p>or the same example with a panel (more realistic):</p>

<pre><code>        HorizontalPanel hp = new HorizontalPanel();
        hp.setSpacing(20);

        GWTCropper cropper = new GWTCropper("image.jpg");
        hp.add(cropper);

        GWTCropperPreview cropperPreview = new GWTCropperPreview(Dimension.WIDTH, 100);
        cropper.registerPreviewWidget(cropperPreview);
        hp.add(cropperPreview);
</code></pre>

<h2>Preview widget in UiBuilder</h2>

<p>It is possible to declare these widgets in your <em>.ui.xml</em> file. Here is a real-life example:</p>

<pre><code>&lt;ui:UiBinder xmlns:ui='urn:ui:com.google.gwt.uibinder'
    xmlns:g='urn:import:com.google.gwt.user.client.ui'
    xmlns:my="urn:import:com.google.code.gwt.crop.client"&gt;

  &lt;g:HorizontalPanel spacing="20"&gt;

   &lt;g:cell&gt;
     &lt;my:GWTCropper imageURL="image.jpg" ui:field="cropper"/&gt;
   &lt;/g:cell&gt;

   &lt;g:cell&gt;
     &lt;g:HTMLPanel&gt;
       &lt;h1&gt;Preview&lt;/h1&gt;
       &lt;my:GWTCropperPreview dimension="WIDTH" value="100" ui:field="cropperPreview" /&gt;
     &lt;/g:HTMLPanel&gt;
    &lt;/g:cell&gt;

  &lt;/g:HorizontalPanel&gt;
</code></pre>

<p>Note, that both <em>dimension</em> and <em>value</em> parameters are mandatory. Then, in your Java view module, you should register preview widget in the cropper instnce:</p>

<pre><code>    @UiField
    GWTCropper cropper;

    @UiField
    GWTCropperPreview cropperPreview;

    //somewhere, for example, in a constructor...
    this.cropper.registerPreviewWidget(this.cropperPreview);
</code></pre>

            </div>
        </div>

        <div class="site-footer" role="contentinfo">
            Created by W32Blaster
        </div>

        <a href="https://github.com/w32blaster"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>
        <script src="/javascripts/plugins.js"></script>
        <script src="/javascripts/main.js"></script>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-35687526-1', 'auto');
          ga('send', 'pageview');
        </script>

        <script>hljs.initHighlightingOnLoad();</script>

    </body>
</html>
