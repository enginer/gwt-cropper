<!doctype html>
<html class="no-js" lang="en" itemscope itemtype="http://schema.org/SoftwareApplication">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Wiki GWT-Cropper</title>
        <meta name="description" content="All the common issues and ways of solving.">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <meta itemprop="applicationCategory" content="Plugin" />
        <meta itemprop="author" content="w32blaster" />
        <meta itemprop="creator" content="w32blaster" />
        <meta itemprop="url" content="http://gwt-cropper.co.uk/"/>

        <link rel="apple-touch-icon" href="/apple-touch-icon.png">
        <!-- Place favicon.ico in the root directory -->

        <link rel="stylesheet" href="/stylesheets/normalize.css">
        <link rel="stylesheet" href="/stylesheets/main.css">

        <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
        
        <link rel="stylesheet" href="/stylesheets/default.css">
        
        <script src="/javascripts/highlight.pack.js"></script>
        <script src="/javascripts/vendor/modernizr-2.8.3.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <div class="container">
                <div class="site-header clearfix" role="banner">
                    <ul class="site-nav inline-block-list">
                        <li>
                            <a href="/">Main</a>
                        </li>
                        <li>
                            <a href="https://github.com/w32blaster/gwt-cropper">GitHub</a>
                        </li>
                    </ul>
                </div>

                <div class="site-promo"></div>
        </div>

        <div class="site-section">
            <div class="container">
                <h3>Table of content</h3>




<ul>
    <li><a href="/Usage">Usage</a></li>
    <li><a href="/TipsAndTricks">Tips and tricks</a></li>
    <li><a href="/Styling">Styling</a></li>
    <li><a href="/HowToUsePreviewWidget">How to use Preview widget</a></li>
</ul>


<h1>Introduction</h1>

<p>In this chapter we are going to collect all common issues and problems and all the ways how to solve it. If you have any problem and you know how to fix it, then please make a note at comments.</p>

<h1>Drag the background (rubber band)</h1>

<p><em>When I browse my application on a tablet, I try to drag the selection, but instead of this I drag the whole application background.</em></p>

<p>It usually looks like this:</p>

<p><img src="/images/wiki/gwt-moving-background.jpg" alt="Drag the whole application instead of only selection" /></p>

<p>You can see, how I move the selection up, but the white background is moving instead. We even can see the native browser's grey background at the bottom.</p>

<p>The simplest way to solve it is to prevent native touch events. The classical code snippet is here:</p>

<pre><code>   function stopScrolling( touchEvent ) { touchEvent.preventDefault(); }

   if (document.addEventListener) {
      document.addEventListener('touchmove', stopScrolling, false);
   } else if (document.attachEvent) {
      document.attachEvent('touchmove', stopScrolling);
   }
</code></pre>

<p>Put this code to your HTML or JSP host page. This code works in all browsers, even in IE.</p>

<p>You also could improve this function, if it conflicts with native scrolling areas. Please refer to <a href="http://stackoverflow.com/questions/10357844/how-to-disable-rubber-band-in-ios-web-apps">this</a> discussion.</p>

<h1>Detect tablet/mobile device in compile time</h1>

<p><em>GWT Cropper</em> uses module <a href="https://github.com/w32blaster/gwt-cropper/blob/master/src/main/java/com/google/code/gwt/crop/FormFactor.gwt.xml">FormFactor</a> to detect tablets. Do you want to re-use it in your code? No problem, this module will be available for you, while you use GWT Cropper.</p>

<p>Let's consider a simple example. Say, you need to implement three different widgets for PC, tablets and mobile devices. And you want to generate different sources for that using [https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsDeferred deferred binding].</p>

<p><img src="/images/wiki/screenshot-desktop.jpeg" alt="Screenshot of the browser on the PC showing the widget from this tutorial" /></p>

<p><img src="/images/wiki/screenshot-nokia-n9.jpg" alt="Screeshot of smartphone (Nokia N9) demonstrating the widget from this tutorial." /></p>

<p><img src="/images/wiki/screenshot-ipad.jpg" alt="Screeshot of the tablet iPad demonstrating the widget from this tutorial." /></p>

<p>Then you should create these three widgets (basic for desktops and two others expanding it).</p>

<p><em>BasicWidget.java</em></p>

<pre><code>public class BasicWidget {

    public Widget build() {
        return new Button("Desktop specific widget (button)");
    }
}
</code></pre>

<p><em>TabletWidget.java</em></p>

<pre><code>public class TabletWidget extends BasicWidget {

    @Override
    public Widget build() {
        return new Hyperlink("Tablet specific widget (link)", "http://www.example.com");
    }

}
</code></pre>

<p><em>MobileWidget.java</em></p>

<pre><code>public class MobileWidget extends BasicWidget {

    @Override
    public Widget build() {
        return new Label("Mobile specific widget (label).");
    }

}
</code></pre>

<p>Then, inehrit FormFactor and declare deffered binding in your <em>.gwt.xml</em> file:</p>

<pre><code>    &lt;!-- Inherit FormFactor module from GWT-Cropper library --&gt;
    &lt;inherits name='com.google.code.gwt.crop.FormFactor'/&gt;

    &lt;!-- Default widget for desktops --&gt;
    &lt;replace-with class="com.google.code.gwt.cropper.demo.client.factor.BasicWidget"&gt;
        &lt;when-type-is class="com.google.code.gwt.cropper.demo.client.factor.BasicWidget" /&gt;
    &lt;/replace-with&gt;

    &lt;!-- Tablet widget --&gt;
    &lt;replace-with class="com.google.code.gwt.cropper.demo.client.factor.TabletWidget"&gt;
        &lt;when-type-is class="com.google.code.gwt.cropper.demo.client.factor.BasicWidget" /&gt;
        &lt;when-property-is name="formfactor" value="tablet" /&gt;
    &lt;/replace-with&gt;

    &lt;!-- Mobile widget --&gt;
    &lt;replace-with class="com.google.code.gwt.cropper.demo.client.factor.MobileWidget"&gt;
        &lt;when-type-is class="com.google.code.gwt.cropper.demo.client.factor.BasicWidget" /&gt;
        &lt;when-property-is name="formfactor" value="mobile" /&gt;
    &lt;/replace-with&gt;
</code></pre>

<p>Finally, use it in your code. Create widget using <em>GWT.create()</em> method and GWT will replace for you this widget to appropriate implementation during the compilation time.</p>

<pre><code>public class Application implements EntryPoint {

    private static final BasicWidget widget = GWT.create(BasicWidget.class);

    /**
     * This is the entry point method.
     */
    public void onModuleLoad() {

        VerticalPanel container = new VerticalPanel();
        container.setSpacing(20);

        // header
        Label label = new Label("This demo of FormFactor module.");
        container.add(label);

        // specific widget for the current platform
        container.add(widget.build());

        RootLayoutPanel.get().add(container);
    }

}
</code></pre>

            </div>
        </div>

        <div class="site-footer" role="contentinfo">
            Created by W32Blaster
        </div>

        <a href="https://github.com/w32blaster"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.11.2.min.js"><\/script>')</script>
        <script src="/javascripts/plugins.js"></script>
        <script src="/javascripts/main.js"></script>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-35687526-1', 'auto');
          ga('send', 'pageview');
        </script>

        <script>hljs.initHighlightingOnLoad();</script>

    </body>
</html>
